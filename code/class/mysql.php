<?php/*	File chứa PHP Class quản lí và đơn giản hóa việc đọc/ghi/sửa dữ liệu với cơ sở dữ liệu của website*/class MySQL {	public function __construct() {			$this->connect = @mysql_connect(SQL_HOST, SQL_USERNAME, SQL_PWD);			if (!$this->connect) {			die('<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /></head><body>Không thể kết nối đến cơ sở dữ liệu MySQL, xin bạn vui lòng quay lại sau hoặc liên hệ người quản lí (email <b><a href="mailto:quocbao747@gmail.com" target="blank_">quocbao747@gmail.com</a></b> hoặc nick yahoo <b><a href="ymsgr:sendIM?quocbao747">quocbao747</a></b> <img border="0 " src="http://opi.yahoo.com/online?u=quocbao747"/>) để biết thêm chi tiết.<br /><b>Xin cảm ơn sự ủng hộ của bạn.</b></body></html>');		} else {			mysql_query('SET NAMES \'UTF8\';');			mysql_select_db(SQL_DB, $this->connect);		}	}		public function install() {		include_once('config/mysql.php');				for ($i = 0; $i <= (count($query)-1); $i++) {			mysql_query($query[$i], $this->connect);		}				$search = mysql_query('SHOW TABLES', $this->connect);		while ($result = mysql_fetch_row($search)) {			if (strpos($result[0], 'database_') !== false) {				mysql_query('DROP TABLE `'.$result[0].'`', $this->connect);			}		}	}		public function setquery($query) {		$this->result = mysql_query($query, $this->connect);		if (mysql_error() != null) {			if (defined('RUNTIME_SQL_QUERY')) {				return mysql_error();			} else {				die('<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><div style="color: red;">Query bị lỗi: <b>'.$query.'</b></div>'.mysql_error().'</body></html>');			}		} else {			return $this->result;		}	}	public function contact2sql($name, $address, $subject, $content, $ip, $time) {		mysql_query('INSERT INTO `contact` VALUES (\''.addslashes($name).'\', \''.addslashes($address).'\', \''.addslashes($subject).'\', \''.addslashes($content).'\', \''.addslashes($ip).'\', \''.$time.'\')');	}		public function log($act,$act_info) {		mysql_query('INSERT INTO `log` VALUES (NULL, \''.$act.'\', \''.$act_info.'\', \''.get_user_ip().'\', \''.current_time().'\')');	}		public function log_ip($ip,$time) {		mysql_query('INSERT INTO `log_ip` VALUES (NULL, \''.$ip.'\', \''.$time.'\')');	}		public function close() {		mysql_close($this->connect);		@mysql_free_result($this->result);			}		/* For install and runtime */		public function get_setting($name) {		$search = mysql_query('SELECT `value` FROM `setting` WHERE `name` = \''.$name.'\'');				$result = mysql_fetch_row($search);		return $result[0];	}	public function update_setting($id, $value) {		mysql_query('UPDATE `setting` SET `value` = \''.$value.'\' WHERE `id` = '.$id.'');	}	/*************************************************/		function __destruct() {		@mysql_free_result($this->result);	}		}?>